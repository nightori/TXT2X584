## TXT2X584
#### Зачем
Те, кто имел удовольствие работать с X584, прекрасной разработкой кафедры ИВТ, без всякого сомнения, обожают её. Интуитивно понятный интерфейс, богатые возможности редактирования, удобство работы... перечислять можно долго. К сожалению, есть и один *небольшой* недостаток — если имеется список команд в текстовом виде (например, в отчете или в экселе), то импортировать его в программу можно лишь одним способом — набрав всё заново. Я столкнулся с такой задачей, и мой внутренний программист не мог позволить мне искать и щёлкать сотни строк вручную, когда существует возможное решение автоматизации. И поэтому на свет появилось это.
#### Что и как
Программа принимает код из **in.txt** и выводит уже готовый **out.x584** файл. Никаких аргументов не принимает, файлы называются так и никак иначе, и лежат в той же папке, что и программа. Да, настолько всё ~~примитивно~~ просто.
###### Форматирование **in.txt**
Всё проще, чем может показаться по этому разделу, поэтому рекомендую сначала посмотреть на образец файла, который лежит в папке *sample*.

Итак, это текстовый файл в формате TSV и кодировке Win-1251 (это важно). Каждая строка — команда. Через символ табуляции также может идти комментарий к этой команде. Все команды пишутся точь-в-точь так, как они выглядят в отчетах, генерируемых X584. Вообще, программа под эти отчеты и заточена, так что если просто скопировать столбики из отчета, то получится как раз нужный формат, разве что пустую строчку в конце убрать.
#### Примечания
* Программа основательно не тестировалась, рекомендую проверять получаемые файлы вручную. Если что — я не виноват.
* Почему-то некоторые команды повторяются несколько раз в X584. Я заметил это только сейчас, поэтому это может привести к ошибкам. А может и не привести.
* Если вам нужен другой формат (а скорее всего нужен), то можете просто привести его к нужному с помощью автозамены, регулярки творят чудеса. Ну или поправить сам код, выжпрограммисты, в конце концов.
###### Описание структуры *.x584* файла ~~(кому это вообще надо)~~
Файл начинается с заголовка `X584`, а потом идут сами команды.
* Первый байт — один из байтов, определяющих команду.
* Второй байт — тоже определяет команду, но ещё и отвечает за ВхПАЛУ (галочку слева). Насколько я понимаю, `20` и `21` — галочки нету, `60` и `61` — галочка есть.
* Третий байт — длина комментария к этой команде.
* Последующие байты — если комментария нет (третий байт равен `00`), то дальше сразу идёт следующая команда. Если же есть какой-то комментарий, то идёт этот комментарий, а потом уже следующая команда.


Пустоты как таковой в файле нет. Можно заметить, что пустой файл это на самом деле файл, заполненный псевдокомандами `<ПУСТО>`. Эта команда имеет код `9A 00` и этой командой заполняется файл до конца, а именно до 1023-й позиции. Как-то так.
